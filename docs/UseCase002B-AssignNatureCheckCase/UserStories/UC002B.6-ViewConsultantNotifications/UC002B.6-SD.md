## UC002B.6 – Sequence Diagram: View Consultant Notifications

This sequence diagram shows the detailed interaction flow when a consultant views their notifications, following Larmann's UML conventions.

**Notes:**
- All method calls use PascalCase (C# convention).
- All calls have return arrows (including void methods).
- Activation bars show object lifetime using automatic activation/deactivation (+/-).

```mermaid
sequenceDiagram
    title UC002B.6 – Sequence Diagram: View Consultant Notifications

    actor Consultant as Consultant
    participant ViewModel as ConsultantNatureCheckViewModel
    participant Service as NatureCheckCaseService
    participant CaseRepo as INatureCheckCaseRepository
    participant FarmRepo as IFarmRepository

    Consultant ->>+ ViewModel: LoadNotificationsAsync()
    ViewModel ->>+ Service: GetNotificationsForConsultantAsync(consultantId)
    
    Service ->>+ CaseRepo: GetAssignedCasesForConsultantAsync(consultantId)
    CaseRepo -->>- Service: IReadOnlyList~NatureCheckCase~
    
    alt No cases found
        Service -->>- ViewModel: IReadOnlyList~ConsultantNotificationDto~ (empty)
    else Cases found
        Service ->>+ FarmRepo: GetAllAsync()
        FarmRepo -->>- Service: List~Farm~
        
        Service ->>+ Service: CreateConsultantNotificationDtos()
        Service -->>- Service: IReadOnlyList~ConsultantNotificationDto~
        Service -->>- ViewModel: IReadOnlyList~ConsultantNotificationDto~
    end
    
    ViewModel ->>+ ViewModel: UpdateNotificationsList()
    ViewModel -->>- ViewModel: void
    ViewModel -->>- Consultant: void
```
