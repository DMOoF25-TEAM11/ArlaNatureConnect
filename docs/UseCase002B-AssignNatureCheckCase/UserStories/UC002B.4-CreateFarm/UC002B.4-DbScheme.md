## Relational Database Schema â€“ UC002B.4: Create Farm (Inline)

### **Stored Procedures for UC002B.4**

#### **usp_Farm_Insert**

**Purpose:** Creates a new farm with address and owner, reusing existing farmer if applicable.

**Parameters:**
- Farm details (name, CVR)
- Address details
- Owner details (first name, last name, email)

**Logic:**
- Validates CVR uniqueness
- Checks if owner email exists
- Reuses existing person if Farmer role
- Creates new person if email doesn't exist
- Creates address and farm

---

### **Business Rules**

1. CVR must be unique
2. Owner email can exist if person has Farmer role (allows multiple farms)
3. Owner must have Farmer role to own multiple farms


