# UC002B.4 â€“ Entity Relationship Diagram

ER Diagram for Create Farm (Inline). This builds upon UC002B.3.

**Note:** This diagram shows tables relevant to UC002B.4. Tables from UC001/UC002 (ROLES, ADDRESSES) are assumed to already exist.

```mermaid
erDiagram
    FARMS {
        uniqueidentifier Id PK
        nvarchar Name
        nvarchar CVR "UNIQUE"
        uniqueidentifier OwnerId FK
        uniqueidentifier AddressId FK
    }

    PERSONS {
        uniqueidentifier Id PK
        nvarchar Email "UNIQUE"
    }

    FARMS }o--|| PERSONS : "owner"
    FARMS }o--|| ADDRESSES : "location"
    PERSONS }o--|| ROLES : "has"
```

## Table Origins

| Table | Origin | Description |
|-------|--------|-------------|
| **FARMS** | UC002 | Farm information (may be created or updated in UC002B.4) |
| **PERSONS** | UC002 | Person information (may be created or reused in UC002B.4) |
| **ROLES** | UC002 | Role definitions (assumed to exist from UC002) |
| **ADDRESSES** | UC002 | Address information (created in UC002B.4) |

**Note:** UC002B.4 can create new farms, addresses, and persons (if owner doesn't exist), or reuse existing persons with Farmer role.

## Constraints

- CVR must be UNIQUE
- Owner can have multiple farms (if Farmer role)

