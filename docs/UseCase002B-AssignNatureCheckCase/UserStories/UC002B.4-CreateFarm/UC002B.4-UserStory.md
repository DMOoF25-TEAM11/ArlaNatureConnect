# User Story – UC002B.4: Create Farm (Inline)

**As an** Arla employee,  
**I want** to create a new farm inline during the assignment process,  
**so that** I can assign Nature Check Cases to farms that are not yet registered in the system.

---

## Acceptance Criteria

1. **Given** I am in the assignment process  
   **When** I click "Tilføj ny gård"  
   **Then** a farm creation form is displayed

2. **Given** I have filled in all required farm information  
   **When** I submit the form  
   **Then** a new farm is created in the system

3. **Given** I enter a CVR that already exists  
   **When** I submit the form  
   **Then** the system shows an error: "En gård med CVR-nummer '[CVR]' findes allerede i systemet."

4. **Given** I enter an owner email that exists and the person has Farmer role  
   **When** I submit the form  
   **Then** the system reuses the existing person and links the new farm to them

5. **Given** I enter an owner email that exists but the person does not have Farmer role  
   **When** I submit the form  
   **Then** the system shows an error: "En person med e-mail '[Email]' findes allerede i systemet, men har ikke rollen 'Farmer'."

---

## Notes

- This use case allows inline farm creation during assignment
- A farmer (person with Farmer role) can own multiple farms with different CVR numbers
- Each farm must have a unique CVR number
- The system validates CVR uniqueness before creating a new farm


