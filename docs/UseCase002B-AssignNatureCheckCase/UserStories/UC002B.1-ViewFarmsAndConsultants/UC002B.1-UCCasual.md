# Casual Use Case – UC002B.1: View Farms and Consultants for Assignment

**Use case:** UC002B.1 – View Farms and Consultants for Assignment  
**Scope:** The prototype of the Arla Nature Connect system  
**Level:** User goal  
**Primary Actors:** Arla Employee (Admin / Sustainability Staff)

---

### **Stakeholders and Interests**

- **Arla employees** want to see all available farms and consultants so they can make informed decisions when assigning Nature Check Cases.

---

### **Preconditions**

- The Arla employee is authenticated (UC01).  
- The employee has opened the Nature Check Cases module.  
- The system has access to farm and consultant data.

---

### **Postconditions**

- All farms in the system are loaded and displayed to the employee.  
- Each farm shows its assignment status (whether it has an active Nature Check Case or not).  
- Each farm with an active case shows the assigned consultant's name and priority level.  
- All consultants (persons with Consultant role) in the system are loaded and displayed to the employee.  
- Consultants are sorted alphabetically by name.  
- Farms are sorted alphabetically by name.

---

### **Main Success Scenario**

1. The Arla employee opens the *Nature Check Cases* module.  
2. The system loads all farms from the database, including their addresses and owner information.  
3. The system loads all active Nature Check Cases (status "Assigned" or "InProgress").  
4. The system loads all consultants (persons with Consultant role) from the database.  
5. The system aggregates farm data with assignment status:
   - For each farm, checks if it has an active case
   - If active case exists, retrieves consultant name and priority
   - Sets assignment status label ("Tilføjet" or "Ikke tilføjet")
6. The system displays the farm list with:
   - Farm name and CVR
   - Owner name
   - Address information
   - Assignment status ("Tilføjet" / "Ikke tilføjet")
   - Priority badge (if active case exists)
   - Assigned consultant name (if active case exists)
7. The system displays the consultant list sorted alphabetically by first name and last name.

---

### **Extensions (Alternatives)**

- **2a. No farms exist in system:**  
  The system displays an empty farm list with a message "Ingen gårde fundet. Opret en gård for at fortsætte."

- **4a. No consultants exist in system:**  
  The system displays an empty consultant list with a message "Ingen konsulenter fundet."

- **5a. Database error occurs:**  
  The system displays an error message "Kunne ikke indlæse data. Prøv igen senere." and logs the error for investigation.

- **5b. Some farms have no owner:**  
  The system displays "Ukendt ejer" (Unknown owner) for farms without owner information.

- **5c. Some farms have no address:**  
  The system displays "Ingen adresse" (No address) for farms without address information.

---

### **Special Requirements**

- Assignment status is determined by checking for active Nature Check Cases (status "Assigned" or "InProgress").
- Priority badges are displayed for farms with active cases.
- Data aggregation: Service aggregates Farm + Person + Address + Case data into DTOs for efficient UI display.
- Farms and consultants are sorted alphabetically for easy navigation.
- The view should load within 500 ms under normal load.


