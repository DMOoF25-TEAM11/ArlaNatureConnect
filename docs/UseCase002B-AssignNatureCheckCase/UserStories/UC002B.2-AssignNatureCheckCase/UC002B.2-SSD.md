# UC002B.2-SSD – Assign Nature Check Case to Consultant

System Sequence Diagram showing the interaction between the Arla Employee actor and the System, following Larmann's UML conventions.

```mermaid
sequenceDiagram
    title UC002B.2 – SSD: Assign Nature Check Case to Consultant

    actor ArlaEmployee as Arla Employee
    participant System as System

    ArlaEmployee ->> System: Select farm without active case
    System -->> ArlaEmployee: Display farm details and empty assignment form
    
    ArlaEmployee ->> System: Select consultant, priority, enter notes, click "Lav natur Check opgave"
    System -->> System: Validate farm, consultant role, priority format, business rules
    
    alt Validation succeeds
        System -->> System: Create new Nature Check Case with status "Assigned"
        System -->> System: Store priority in English format
        System -->> System: Create database notification for consultant
        System -->> System: Update farm assignment status to "Tilføjet"
        System -->> ArlaEmployee: Display success message "Natur Check opgave er oprettet for [FarmName]"
    else Validation fails
        alt No consultant selected
            System -->> ArlaEmployee: Display error "Vælg konsulent"
        else Consultant does not have Consultant role
            System -->> ArlaEmployee: Display error "Den valgte person har ikke konsulent-rollen"
        else Farm already has active case
            System -->> ArlaEmployee: Display error "Gården har allerede en aktiv Natur Check opgave"
        else Invalid priority
            System -->> ArlaEmployee: Display error "Ugyldig prioritet"
        end
    end
```

**Notes:**
- The system validates all inputs before creating the case.
- Priority is converted from Danish (UI) to English (database) during the assignment process.
- A notification is automatically created for the consultant when the case is assigned.
- The farm's assignment status is updated to reflect the new active case.


