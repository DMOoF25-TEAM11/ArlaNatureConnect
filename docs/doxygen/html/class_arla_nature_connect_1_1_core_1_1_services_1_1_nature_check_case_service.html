<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Arla Nature Connect: ArlaNatureConnect.Core.Services.NatureCheckCaseService Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Arla Nature Connect
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_arla_nature_connect_1_1_core_1_1_services_1_1_nature_check_case_service.html','','class_arla_nature_connect_1_1_core_1_1_services_1_1_nature_check_case_service-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ArlaNatureConnect.Core.Services.NatureCheckCaseService Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for ArlaNatureConnect.Core.Services.NatureCheckCaseService:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_arla_nature_connect_1_1_core_1_1_services_1_1_nature_check_case_service.png" usemap="#ArlaNatureConnect_2ECore_2EServices_2ENatureCheckCaseService_map" alt=""/>
  <map id="ArlaNatureConnect_2ECore_2EServices_2ENatureCheckCaseService_map" name="ArlaNatureConnect_2ECore_2EServices_2ENatureCheckCaseService_map">
<area href="interface_arla_nature_connect_1_1_core_1_1_services_1_1_i_nature_check_case_service.html" alt="ArlaNatureConnect.Core.Services.INatureCheckCaseService" shape="rect" coords="0,0,361,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab20c919e32eb3f2bad90d16047c53f79" id="r_ab20c919e32eb3f2bad90d16047c53f79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab20c919e32eb3f2bad90d16047c53f79">NatureCheckCaseService</a> (<a class="el" href="interface_arla_nature_connect_1_1_core_1_1_abstract_1_1_i_farm_repository.html">IFarmRepository</a> farmRepository, <a class="el" href="interface_arla_nature_connect_1_1_core_1_1_abstract_1_1_i_person_repository.html">IPersonRepository</a> personRepository, <a class="el" href="interface_arla_nature_connect_1_1_core_1_1_abstract_1_1_i_address_repository.html">IAddressRepository</a> addressRepository, <a class="el" href="interface_arla_nature_connect_1_1_core_1_1_abstract_1_1_i_nature_check_case_repository.html">INatureCheckCaseRepository</a> natureCheckCaseRepository, <a class="el" href="interface_arla_nature_connect_1_1_core_1_1_abstract_1_1_i_role_repository.html">IRoleRepository</a> roleRepository)</td></tr>
<tr class="memdesc:ab20c919e32eb3f2bad90d16047c53f79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new instance of the <a class="el" href="class_arla_nature_connect_1_1_core_1_1_services_1_1_nature_check_case_service.html">NatureCheckCaseService</a> class with the specified repository dependencies.  <br /></td></tr>
<tr class="memitem:a62a3b6c88f2346437f01c4a175e5f2f3" id="r_a62a3b6c88f2346437f01c4a175e5f2f3"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_nature_check_case_assignment_context.html">NatureCheckCaseAssignmentContext</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62a3b6c88f2346437f01c4a175e5f2f3">LoadAssignmentContextAsync</a> (CancellationToken cancellationToken=default)</td></tr>
<tr class="memdesc:a62a3b6c88f2346437f01c4a175e5f2f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asynchronously loads the context required for assigning NatureCheck cases, including farm overviews and available consultants.  <br /></td></tr>
<tr class="memitem:a336b6a83d9e79c69c044ef8261be5bd2" id="r_a336b6a83d9e79c69c044ef8261be5bd2"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="class_arla_nature_connect_1_1_domain_1_1_entities_1_1_nature_check_case.html">NatureCheckCase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a336b6a83d9e79c69c044ef8261be5bd2">AssignCaseAsync</a> (<a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_nature_check_case_assignment_request.html">NatureCheckCaseAssignmentRequest</a> request, CancellationToken cancellationToken=default)</td></tr>
<tr class="memdesc:a336b6a83d9e79c69c044ef8261be5bd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assigns a new Nature Check case to the specified consultant for the given farm, based on the provided assignment request.  <br /></td></tr>
<tr class="memitem:a0f2e7b0f1bf363dd96988960d1cad1c8" id="r_a0f2e7b0f1bf363dd96988960d1cad1c8"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="class_arla_nature_connect_1_1_domain_1_1_entities_1_1_nature_check_case.html">NatureCheckCase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0f2e7b0f1bf363dd96988960d1cad1c8">UpdateCaseAsync</a> (Guid farmId, <a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_nature_check_case_assignment_request.html">NatureCheckCaseAssignmentRequest</a> request, CancellationToken cancellationToken=default)</td></tr>
<tr class="memdesc:a0f2e7b0f1bf363dd96988960d1cad1c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates an existing active nature check case with new consultant, priority, and notes.  <br /></td></tr>
<tr class="memitem:a82ec7f0e7077c76b80ff8ee5b952bd84" id="r_a82ec7f0e7077c76b80ff8ee5b952bd84"><td class="memItemLeft" align="right" valign="top">async Task&lt; <a class="el" href="class_arla_nature_connect_1_1_domain_1_1_entities_1_1_farm.html">Farm</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82ec7f0e7077c76b80ff8ee5b952bd84">SaveFarmAsync</a> (<a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_farm_registration_request.html">FarmRegistrationRequest</a> request, CancellationToken cancellationToken=default)</td></tr>
<tr class="memdesc:a82ec7f0e7077c76b80ff8ee5b952bd84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new farm or updates an existing farm asynchronously based on the provided registration request.  <br /></td></tr>
<tr class="memitem:ae65714ed4a901a075d81a82a67c0de18" id="r_ae65714ed4a901a075d81a82a67c0de18"><td class="memItemLeft" align="right" valign="top">async Task&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae65714ed4a901a075d81a82a67c0de18">DeleteFarmAsync</a> (Guid farmId, CancellationToken cancellationToken=default)</td></tr>
<tr class="memdesc:ae65714ed4a901a075d81a82a67c0de18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a farm by its identifier.  <br /></td></tr>
<tr class="memitem:a13247bad276baafb3d746e05c9eb219e" id="r_a13247bad276baafb3d746e05c9eb219e"><td class="memItemLeft" align="right" valign="top">async Task&lt; IReadOnlyList&lt; <a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_consultant_notification_dto.html">ConsultantNotificationDto</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a13247bad276baafb3d746e05c9eb219e">GetNotificationsForConsultantAsync</a> (Guid consultantId, CancellationToken cancellationToken=default)</td></tr>
<tr class="memdesc:a13247bad276baafb3d746e05c9eb219e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all assigned (new) nature check cases for a specific consultant as notifications.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="_nature_check_case_service_8cs_source.html#l00010">10</a> of file <a class="el" href="_nature_check_case_service_8cs_source.html">NatureCheckCaseService.cs</a>.</p>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ab20c919e32eb3f2bad90d16047c53f79" name="ab20c919e32eb3f2bad90d16047c53f79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab20c919e32eb3f2bad90d16047c53f79">&#9670;&#160;</a></span>NatureCheckCaseService()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ArlaNatureConnect.Core.Services.NatureCheckCaseService.NatureCheckCaseService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_arla_nature_connect_1_1_core_1_1_abstract_1_1_i_farm_repository.html">IFarmRepository</a></td>          <td class="paramname"><span class="paramname"><em>farmRepository</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_arla_nature_connect_1_1_core_1_1_abstract_1_1_i_person_repository.html">IPersonRepository</a></td>          <td class="paramname"><span class="paramname"><em>personRepository</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_arla_nature_connect_1_1_core_1_1_abstract_1_1_i_address_repository.html">IAddressRepository</a></td>          <td class="paramname"><span class="paramname"><em>addressRepository</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_arla_nature_connect_1_1_core_1_1_abstract_1_1_i_nature_check_case_repository.html">INatureCheckCaseRepository</a></td>          <td class="paramname"><span class="paramname"><em>natureCheckCaseRepository</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_arla_nature_connect_1_1_core_1_1_abstract_1_1_i_role_repository.html">IRoleRepository</a></td>          <td class="paramname"><span class="paramname"><em>roleRepository</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes a new instance of the <a class="el" href="class_arla_nature_connect_1_1_core_1_1_services_1_1_nature_check_case_service.html">NatureCheckCaseService</a> class with the specified repository dependencies. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">farmRepository</td><td>The repository used to access farm data. Cannot be null.</td></tr>
    <tr><td class="paramname">personRepository</td><td>The repository used to access person data. Cannot be null.</td></tr>
    <tr><td class="paramname">addressRepository</td><td>The repository used to access address data. Cannot be null.</td></tr>
    <tr><td class="paramname">natureCheckCaseRepository</td><td>The repository used to access nature check case data. Cannot be null.</td></tr>
    <tr><td class="paramname">roleRepository</td><td>The repository used to access role data. Cannot be null.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ArgumentNullException</td><td>Thrown if any of the repository parameters is null.</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_nature_check_case_service_8cs_source.html#l00030">30</a> of file <a class="el" href="_nature_check_case_service_8cs_source.html">NatureCheckCaseService.cs</a>.</p>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="a336b6a83d9e79c69c044ef8261be5bd2" name="a336b6a83d9e79c69c044ef8261be5bd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a336b6a83d9e79c69c044ef8261be5bd2">&#9670;&#160;</a></span>AssignCaseAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="class_arla_nature_connect_1_1_domain_1_1_entities_1_1_nature_check_case.html">NatureCheckCase</a> &gt; ArlaNatureConnect.Core.Services.NatureCheckCaseService.AssignCaseAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_nature_check_case_assignment_request.html">NatureCheckCaseAssignmentRequest</a></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken</td>          <td class="paramname"><span class="paramname"><em>cancellationToken</em></span><span class="paramdefsep"> = </span><span class="paramdefval">default</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assigns a new Nature Check case to the specified consultant for the given farm, based on the provided assignment request. </p>
<p>The method validates the existence of the farm and consultant, ensures the consultant has the appropriate role, and checks for active cases on the farm before assignment. If the assignment is successful, the new case is persisted and returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>The assignment request containing details about the farm, consultant, assignment initiator, and case options. Cannot be null.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>A cancellation token that can be used to cancel the asynchronous operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <a class="el" href="class_arla_nature_connect_1_1_domain_1_1_entities_1_1_nature_check_case.html">NatureCheckCase</a> instance representing the newly assigned case.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ArgumentNullException</td><td>Thrown if <em>request</em>  is null.</td></tr>
    <tr><td class="paramname">InvalidOperationException</td><td>Thrown if the specified farm or consultant does not exist, if the consultant does not have the required role, or if the farm already has an active case and duplicate active cases are not allowed.</td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interface_arla_nature_connect_1_1_core_1_1_services_1_1_i_nature_check_case_service.html#a74d51020ab3255122a6d317a345fe42a">ArlaNatureConnect.Core.Services.INatureCheckCaseService</a>.</p>

<p class="definition">Definition at line <a class="el" href="_nature_check_case_service_8cs_source.html#l00101">101</a> of file <a class="el" href="_nature_check_case_service_8cs_source.html">NatureCheckCaseService.cs</a>.</p>

</div>
</div>
<a id="ae65714ed4a901a075d81a82a67c0de18" name="ae65714ed4a901a075d81a82a67c0de18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae65714ed4a901a075d81a82a67c0de18">&#9670;&#160;</a></span>DeleteFarmAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task ArlaNatureConnect.Core.Services.NatureCheckCaseService.DeleteFarmAsync </td>
          <td>(</td>
          <td class="paramtype">Guid</td>          <td class="paramname"><span class="paramname"><em>farmId</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken</td>          <td class="paramname"><span class="paramname"><em>cancellationToken</em></span><span class="paramdefsep"> = </span><span class="paramdefval">default</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deletes a farm by its identifier. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">farmId</td><td></td></tr>
    <tr><td class="paramname">cancellationToken</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Implements <a class="el" href="interface_arla_nature_connect_1_1_core_1_1_services_1_1_i_nature_check_case_service.html#a6b1478879b099d2eebfcbfccad134549">ArlaNatureConnect.Core.Services.INatureCheckCaseService</a>.</p>

<p class="definition">Definition at line <a class="el" href="_nature_check_case_service_8cs_source.html#l00309">309</a> of file <a class="el" href="_nature_check_case_service_8cs_source.html">NatureCheckCaseService.cs</a>.</p>

</div>
</div>
<a id="a13247bad276baafb3d746e05c9eb219e" name="a13247bad276baafb3d746e05c9eb219e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13247bad276baafb3d746e05c9eb219e">&#9670;&#160;</a></span>GetNotificationsForConsultantAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; IReadOnlyList&lt; <a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_consultant_notification_dto.html">ConsultantNotificationDto</a> &gt; &gt; ArlaNatureConnect.Core.Services.NatureCheckCaseService.GetNotificationsForConsultantAsync </td>
          <td>(</td>
          <td class="paramtype">Guid</td>          <td class="paramname"><span class="paramname"><em>consultantId</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken</td>          <td class="paramname"><span class="paramname"><em>cancellationToken</em></span><span class="paramdefsep"> = </span><span class="paramdefval">default</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets all assigned (new) nature check cases for a specific consultant as notifications. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">consultantId</td><td>The ID of the consultant.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>A cancellation token that can be used to cancel the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of notification <a class="el" href="namespace_arla_nature_connect_1_1_core_1_1_d_t_os.html">DTOs</a> for assigned cases.</dd></dl>

<p>Implements <a class="el" href="interface_arla_nature_connect_1_1_core_1_1_services_1_1_i_nature_check_case_service.html#a775abeb04f4b0b4c0a6a312b8ea7d0fe">ArlaNatureConnect.Core.Services.INatureCheckCaseService</a>.</p>

<p class="definition">Definition at line <a class="el" href="_nature_check_case_service_8cs_source.html#l00326">326</a> of file <a class="el" href="_nature_check_case_service_8cs_source.html">NatureCheckCaseService.cs</a>.</p>

</div>
</div>
<a id="a62a3b6c88f2346437f01c4a175e5f2f3" name="a62a3b6c88f2346437f01c4a175e5f2f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62a3b6c88f2346437f01c4a175e5f2f3">&#9670;&#160;</a></span>LoadAssignmentContextAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_nature_check_case_assignment_context.html">NatureCheckCaseAssignmentContext</a> &gt; ArlaNatureConnect.Core.Services.NatureCheckCaseService.LoadAssignmentContextAsync </td>
          <td>(</td>
          <td class="paramtype">CancellationToken</td>          <td class="paramname"><span class="paramname"><em>cancellationToken</em></span><span class="paramdefsep"> = </span><span class="paramdefval">default</span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Asynchronously loads the context required for assigning NatureCheck cases, including farm overviews and available consultants. </p>
<p>The returned context includes only active farms and consultants. The operation may involve multiple data sources and can be cancelled via the provided token.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td>A cancellation token that can be used to cancel the asynchronous operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A task that represents the asynchronous operation. The task result contains a <a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_nature_check_case_assignment_context.html">NatureCheckCaseAssignmentContext</a> with farm assignment overviews and a sorted list of consultants.</dd></dl>

<p>Implements <a class="el" href="interface_arla_nature_connect_1_1_core_1_1_services_1_1_i_nature_check_case_service.html#aa749b2e01fb87008c08cb3a45fe38cc4">ArlaNatureConnect.Core.Services.INatureCheckCaseService</a>.</p>

<p class="definition">Definition at line <a class="el" href="_nature_check_case_service_8cs_source.html#l00053">53</a> of file <a class="el" href="_nature_check_case_service_8cs_source.html">NatureCheckCaseService.cs</a>.</p>

</div>
</div>
<a id="a82ec7f0e7077c76b80ff8ee5b952bd84" name="a82ec7f0e7077c76b80ff8ee5b952bd84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82ec7f0e7077c76b80ff8ee5b952bd84">&#9670;&#160;</a></span>SaveFarmAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="class_arla_nature_connect_1_1_domain_1_1_entities_1_1_farm.html">Farm</a> &gt; ArlaNatureConnect.Core.Services.NatureCheckCaseService.SaveFarmAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_farm_registration_request.html">FarmRegistrationRequest</a></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken</td>          <td class="paramname"><span class="paramname"><em>cancellationToken</em></span><span class="paramdefsep"> = </span><span class="paramdefval">default</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new farm or updates an existing farm asynchronously based on the provided registration request. </p>
<p>If <em>request</em>  contains a farm ID, the method updates the corresponding farm and its related address and owner information. If no farm ID is provided, a new farm, address, and owner are created. The operation is performed asynchronously and may involve multiple data repositories.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>The registration details for the farm to create or update. Cannot be null.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>A cancellation token that can be used to cancel the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A task that represents the asynchronous operation. The task result contains the created or updated farm entity.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">ArgumentNullException</td><td>Thrown if <em>request</em>  is null.</td></tr>
    <tr><td class="paramname">InvalidOperationException</td><td>Thrown if the specified farm to update does not exist.</td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interface_arla_nature_connect_1_1_core_1_1_services_1_1_i_nature_check_case_service.html#a0631397c54e03dc89ae718898a18ec9d">ArlaNatureConnect.Core.Services.INatureCheckCaseService</a>.</p>

<p class="definition">Definition at line <a class="el" href="_nature_check_case_service_8cs_source.html#l00182">182</a> of file <a class="el" href="_nature_check_case_service_8cs_source.html">NatureCheckCaseService.cs</a>.</p>

</div>
</div>
<a id="a0f2e7b0f1bf363dd96988960d1cad1c8" name="a0f2e7b0f1bf363dd96988960d1cad1c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f2e7b0f1bf363dd96988960d1cad1c8">&#9670;&#160;</a></span>UpdateCaseAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt; <a class="el" href="class_arla_nature_connect_1_1_domain_1_1_entities_1_1_nature_check_case.html">NatureCheckCase</a> &gt; ArlaNatureConnect.Core.Services.NatureCheckCaseService.UpdateCaseAsync </td>
          <td>(</td>
          <td class="paramtype">Guid</td>          <td class="paramname"><span class="paramname"><em>farmId</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_arla_nature_connect_1_1_core_1_1_d_t_os_1_1_nature_check_case_assignment_request.html">NatureCheckCaseAssignmentRequest</a></td>          <td class="paramname"><span class="paramname"><em>request</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CancellationToken</td>          <td class="paramname"><span class="paramname"><em>cancellationToken</em></span><span class="paramdefsep"> = </span><span class="paramdefval">default</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates an existing active nature check case with new consultant, priority, and notes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">farmId</td><td>The ID of the farm whose active case should be updated.</td></tr>
    <tr><td class="paramname">request</td><td>The update request containing new consultant, priority, and notes.</td></tr>
    <tr><td class="paramname">cancellationToken</td><td>A cancellation token that can be used to cancel the operation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The updated nature check case.</dd></dl>

<p>Implements <a class="el" href="interface_arla_nature_connect_1_1_core_1_1_services_1_1_i_nature_check_case_service.html#a02b88b1a2a71653e17143dcf777423ab">ArlaNatureConnect.Core.Services.INatureCheckCaseService</a>.</p>

<p class="definition">Definition at line <a class="el" href="_nature_check_case_service_8cs_source.html#l00142">142</a> of file <a class="el" href="_nature_check_case_service_8cs_source.html">NatureCheckCaseService.cs</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/ArlaNatureConnect.Core/Services/<a class="el" href="_nature_check_case_service_8cs_source.html">NatureCheckCaseService.cs</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespace_arla_nature_connect.html">ArlaNatureConnect</a></li><li class="navelem"><a href="namespace_arla_nature_connect_1_1_core.html">Core</a></li><li class="navelem"><a href="namespace_arla_nature_connect_1_1_core_1_1_services.html">Services</a></li><li class="navelem"><a href="class_arla_nature_connect_1_1_core_1_1_services_1_1_nature_check_case_service.html">NatureCheckCaseService</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
